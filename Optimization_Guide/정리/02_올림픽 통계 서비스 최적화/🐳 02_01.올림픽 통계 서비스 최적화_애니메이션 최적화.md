# π³ 02. μ¬λ¦Όν”½ ν†µκ³„ μ„λΉ„μ¤ μµμ ν™”

## π μ• λ‹λ©”μ΄μ… μµμ ν™”

### π‘‰ λ¬Έμ  μ• λ‹λ©”μ΄μ… μ°ΎκΈ°

μ„¤λ¬Έ κ²°κ³Ό μμ—­μ μ• λ‹λ©”μ΄μ…μ΄ μ μ©λμ–΄ μλ‹¤.

ν•΄λ‹Ή μ• λ‹λ©”μ΄μ…μ„ μΌμΌν‚¤λ” μ†μ„±μ€ `transiton`μ΄ μ μ©λ widthλΏμ΄μ§€λ§, λκΈ°λ” κ²ƒμ²λΌ λ³΄μΈλ‹¤.

```javascript
const BarGraph = styled.div`
    position: absolute;
    left: 0;
    top: 0;
    width: ${({width}) => width}%;
    transition: width 1.5s ease;
    height: 100%;
    background: ${({isSelected}) => isSelected ? 'rgba(126, 198, 81, 0.7)' : 'rgb(198, 198, 198)'};
    z-index: 1;
`
```

<br/>

### π‘‰ μ• λ‹λ©”μ΄μ…μ μ›λ¦¬

λ¨Όμ € λΈλΌμ°μ €μ—μ„ μ• λ‹λ©”μ΄μ…μ΄ μ–΄λ–»κ² λ™μ‘ν•κ³ , λΈλΌμ°μ €λ” μ–΄λ–¤ κ³Όμ •μ„ κ±°μ³ ν™”λ©΄μ„ κ·Έλ¦¬λ”μ§€ μ΄ν•΄κ°€ ν•„μ”ν•λ‹¤.

μ• λ‹λ©”μ΄μ…μ μ›λ¦¬λ” **μ—¬λ¬μ¥μ μ΄λ―Έμ§€λ¥Ό λΉ λ¥΄κ² μ „ν™ν•μ—¬ μ°λ¦¬ λμ— μ”μƒμ„ λ‚¨κΈ°κ³ , κ·Έλ΅ μΈν•΄ μ—°μ†λ μ΄λ―Έμ§€κ°€ μ›€μ§μ΄λ” κ²ƒμ²λΌ λκ»΄μ§€κ² ν•λ”**κ²ƒμ΄λ‹¤.<br/>(μΌλ°μ μΌλ΅ 60Hzμ μ£Όμ‚¬μ¨μ΄λΌλ©΄, 1μ΄μ— 60μ¥μ μ •μ§€λ ν™”λ©΄μ„ λΉ λ¥΄κ² λ³΄μ—¬μ¤€λ‹¤λ” μλ―Έ)

μ• λ‹λ©”μ΄μ…μ΄ λλ λκΈ΄λ‹¤λ” κ²ƒμ€ 1μ΄μ— 60μ¥μ ν”„λ μ„μ„ μ λ€λ΅ λ»κ·Έλ Έλ‹¤λ” λ»μ΄λ‹¤.

μ΄ν•΄λ¥Ό μ„ν•΄ λ¨Όμ €, λΈλΌμ°μ € λ λ”λ§ κ³Όμ •μ— λ€ν•΄ μ•μ•„λ³΄μ.

<br/>

### π‘‰ λΈλΌμ°μ € λ λ”λ§ κ³Όμ •

`DOM + CSSOM -> λ λ” νΈλ¦¬ -> λ μ΄μ•„μ›ƒ -> νμΈνΈ -> μ»΄ν¬μ§€νΈ`

λΈλΌμ°μ €λ” μ„μ™€ κ°™μ€ κ²½λ΅λ΅ κ·Έλ ¤μ§€λ©° μ΄λ° κ³Όμ •μ„ `μ£Όμ” λ λ”λ§ κ²½λ΅(Critical Rendering Path)` λλ” `ν”½μ…€ νμ΄ν”„λΌμΈ(Pixel Pipeline)`μ΄λΌ ν•λ‹¤.

#### π”ΈDOM + CSSOM

HTML, CSSλ“± λ¦¬μ†μ¤λ¥Ό λ‹¤μ΄λ΅λ“ν•κ³ , λΈλΌμ°μ €κ°€ μ΄ν•΄ν•  μ μλ” ν•νƒλ΅ HTMLμ„ νμ‹±κ³Όμ •μ„ κ±°μΉκ³ , νΈλ¦¬κµ¬μ΅°λ΅ ν‘ν„λ `DOM(Document Object Model)`μ„ λ§λ“ λ‹¤.

CSSλ„ λ§μ°¬κ°€μ§€λ΅ λ³€ν™λμ–΄, κ° μ”μ†κ°€ μ–΄λ–¤ μ¤νƒ€μΌμ„ κ°€μ§€κ³  μλ”μ§€ μ •λ³΄λ¥Ό ν¬ν•¨ν•μ—¬ `CSSOM(CSS Object Model)`μ΄λ€ νΈλ¦¬κµ¬μ΅°λ΅ μƒμ„±λλ‹¤.

#### π”Έ λ λ” νΈλ¦¬

DOMκ³Ό CSSOMμ„ κ²°ν•©ν•μ—¬ λ λ”νΈλ¦¬κ°€ μƒμ„±λλ‹¤.

μ΄ λ λ”νΈλ¦¬λ” κ° μ”μ†μ λ μ΄μ•„μ›ƒμ„ κ³„μ‚°ν•λ”λ° μ‚¬μ©λλ‹¤.

> display: none;
>
> display:noneμ€ λ λ”νΈλ¦¬μ— ν¬ν•¨λμ§€μ•μ§€λ§, opacity: 0 μ΄λ‚ visibility:none;μ€ λ λ”νΈλ¦¬μ— ν¬ν•¨λλ‹¤.

#### π”Έ λ μ΄μ•„μ›ƒ

ν™”λ©΄ κµ¬μ„± μ”μ†μ μ„μΉλ‚ ν¬κΈ°λ¥Ό κ³„μ‚°ν•κ³ , ν•΄λ‹Ή γ…μ΄μΉμ— μ”μ†λ¥Ό λ°°μΉν•λ” μ‘μ—….

#### π”Έ νμΈνΈ

ν™”λ©΄μ— λ°°μΉλ μ”μ†μ— μƒ‰μ„ μ±„μ› λ„£λ” μ‘μ—….

λΈλΌμ°μ €λ” ν¨μ¨μ μΈ νμΈνΈ κ³Όμ •μ„ μ„ν•΄ κµ¬μ„± μ”μ†λ¥Ό μ—¬λ¬ κ°μ λ μ΄μ–΄λ΅ λ‚λ  μ‘μ—…ν•κΈ°λ„ ν•¨.

#### π”Έ μ»΄ν¬μ§€νΈ

λ‚λ μ„ μ‘μ—…ν• κ° λ μ΄μ–΄λ¥Ό ν•©μ„±ν•λ” μ‘μ—….

<br/>

### π‘‰ λ¦¬ν”λ΅μ°μ™€ λ¦¬νμΈνΈ

μΌλ¶€ μ”μ†μ μ¤νƒ€μΌμ΄ λ³€κ²½ or μ¶”κ°€, μ κ±° λλ©΄, λ λ”λ§ κ²½λ΅μ—μ„ κ±°μΉ κ³Όμ •μ„ λ‹¤μ‹ ν• λ² μ‹¤ν–‰ν•λ©΄μ„ μƒλ΅μ΄ ν™”λ©΄μ„ κ·Έλ¦¬λ”λ°, μ΄κ²ƒμ„ `λ¦¬ν”λ΅μ°(Reflow)`μ™€ `λ¦¬νμΈνΈ(Repaint)`λΌ ν•λ‹¤.

<br/>

#### π”Έ λ¦¬ν”λ΅μ°

μλ¥Ό λ“¤μ–΄ μ–΄λ–¤ μ”μ†μ λ„λΉ„μ™€ λ†’μ΄κ°€ λ³€κ²½λλ‹¤κ³  κ°€μ •ν•΄λ³΄μ.

μ”μ†μ μ¤νƒ€μΌμ΄ λ³€ν–μΌλ‹ CSSOMμ„ λ‹¤μ‹ λ§λ“¤κ³ , μƒλ΅μ΄ λ λ”νΈλ¦¬λ¥Ό κ·Έλ¦°λ‹¤. -> λ μ΄μ•„μ›ƒ λ‹¨κ³„μ—μ„ λ‹¤μ‹ ν¬κΈ°μ™€ μ„μΉλ¥Ό κ³ λ ¤ -> λ³€κ²½λ ν™”λ©΄ κµ¬μ„±μ— λ§κ² μƒ‰μ„ μΉ ν•κ³ (νμΈνΈ) -> λ¶„ν• λ λ μ΄μ–΄λ¥Ό λ‹¤μ‹ ν•©μ„±(μ»΄ν¬μ§€νΈ)

μ΄λ ‡κ² μ£Όμ” λ λ”λ§ κ²½λ΅μ λ¨λ“  λ‹¨κ³„λ¥Ό λ¨λ‘ μ¬μ‹¤ν–‰ν•λ” κ²ƒμ„ **λ¦¬ν”λ΅μ°**λΌ ν•λ©°, λΈλΌμ°μ € λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ‚¬μ©ν•κ² λλ‹¤.

#### π”Έ λ¦¬νμΈνΈ

μ΄λ²μ—” μƒ‰μ΄ λ³€κ²½λμ—λ‹¤κ³  κ°€μ •ν•΄λ³΄μ.

CSSOMμ„ λ‹¤μ‹ λ§λ“¤κ³ , μƒλ΅μ΄ λ λ”νΈλ¦¬λ¥Ό κ·Έλ¦°λ‹¤. -> μƒ‰λ§ λ³€ν–κΈ° λ•λ¬Έμ— λ μ΄μ•„μ›ƒ λ‹¨κ³„λ” Skip -> μƒ‰μ„ μ…νλ” νμΈνΈ λ‹¨κ³„ -> μ»΄ν¬μ§€νΈ λ‹¨κ³„

μ΄λ ‡κ² λ μ΄μ•„μ›ƒμ΄ μ¤ν‚µλ ν•νƒλ΅ μ‹¤ν–‰λλ” κ²ƒμ„ **λ¦¬νμΈνΈ**λΌκ³  ν•λ‹¤. λ¦¬ν”λ΅μ°λ³΄λ‹¤λ” μ΅°κΈ λ” λΉ λ¥΄κ² μ§€λ§, μ—­μ‹ κ±°μ λ¨λ“  λ‹¨κ³„λ¥Ό κ±°μΉκΈ° λ•λ¬Έμ— λ¦¬μ†μ¤λ¥Ό κ½¤ μ΅μ•„λ¨Ήλ”λ‹¤.

<BR/>

μ •λ¦¬ν•΄λ³΄μλ©΄, μ”μ†μ μƒνƒ λ³€ν™”κ°€ μΌμ–΄λ‚λ©΄ λ¦¬ν”λ΅μ°λ‚ λ¦¬νμΈνΈκ³Όμ •μ„ κ±°μΉλ”λ°, μ΄λ° κ³Όμ •μ€ λΈλΌμ°μ €μ λ¦¬μ†μ¤λ¥Ό λ§μ΄ μ΅μ•„λ¨Ήμ–΄ κ²°κµ­ μƒλ΅ κ·Έλ¦¬λ” κ²ƒμ΄ λλ¦΄ μ λ°–μ— μ—†λ‹¤.

> λ¦¬ν”λ΅μ°μ™€ λ¦¬νμΈνΈλ¥Ό μΌμΌν‚¤λ” μ†μ„±
>
> **λ¦¬ν”λ΅μ°**
>
> position, display, width, float, height, font-family, top, left, font-size, font-weight, line-height, min-height, margin, padding, borderλ“±
>
> **λ¦¬νμΈνΈ**
>
> background, background-iamge, background-position, border-radius, border-style, box-shadow, color, line-style, outline λ“±

<br/>

### π‘‰ ν•λ“μ›¨μ–΄ κ°€μ† (GPU κ°€μ†)

μ„μ μ‘μ—…μ„ ν”Όν•κΈ° μ„ν•΄ transform, opacityκ°™μ€ μ†μ„±μ„ μ΄μ©ν•μ—¬, ν•΄λ‹Ήμ”μ†λ¥Ό λ³„λ„μ λ μ΄μ–΄λ΅ λ¶„λ¦¬ν•κ³ , μ‘μ—…μ„ GPUμ— μ„μ„ν•μ—¬ μ²λ¦¬ν•¨μΌλ΅μ¨ λ μ΄μ•„μ›ƒκ³Ό νμΈνΈ λ‹¨κ³„λ¥Ό κ±΄λ„ λ›Έ μ μλ‹¤. μ΄λ¥Ό **ν•λ“μ›¨μ–΄ κ°€μ†** μ΄λΌκ³  ν•λ‹¤.

GPUλ” μ• μ΄μ— κ·Έλν”½ μ‘μ—…μ„ μ²λ¦¬ν•κΈ° μ„ν•΄ λ§λ“¤μ–΄μ§„ κ²ƒμ΄λΌ ν™”λ©΄ κ·Έλ¦΄λ–„ ν™μ©ν•λ©΄ κµ‰μ¥ν λΉ λ¥΄λ‹¤.

> transform: translate()
>
> μ„ μ†μ„±μ€ μ²μλ¶€ν„° λ μ΄μ–΄λ¥Ό λ¶„λ¦¬ν•μ§€ μ•κ³  λ³€ν™”κ°€ μΌμ–΄λ‚λ” μκ°„ λ μ΄μ–΄λ¥Ό λ¶„λ¦¬ν•λ‹¤.
>
> transform: translate3d()λλ” scale3d()κ°™μ€ 3dμ†μ„±λ“¤ λλ” will-changeμ†μ„±μ€ μ²μλ¶€ν„° λ μ΄μ–΄λ¥Ό λ¶„λ¦¬ν•΄ λ‘κΈ° λ•λ¬Έμ— λ³€ν™”μ— λ”μ± λΉ λ¥΄κ² λ€μ²ν•  μ μλ‹¤.

<br/>

Performanceν¨λ„μ—μ„ CPUλ¥Ό 6x slowdownμΌλ΅ μ„¤μ • ν›„ μ• λ‹λ©”μ΄μ…λ¶€λ¶„μ„ ν™•μΈν•΄λ³΄λ©΄, ν™”λ©΄ κ°±μ‹  μ „μ— λ¨λ“  μ‘μ—…μ΄ μ™„λ£λμ§€ μ•λ” κ²ƒμ„ν™•μΈν•  μ μλ‹¤. μµμ ν™”λ¥Ό μ§„ν–‰ν•΄λ³΄μ.

<br/>

### π‘‰ μ• λ‹λ©”μ΄μ… μµμ ν™”

widthλ΅ λμλ” μ• λ‹λ©”μ΄μ…μ„ scaleλ΅ λ³€κ²½ν•΄ μµμ ν™” ν•΄λ³΄μ.

```js
const BarGraph = styled.div`
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  transform: scaleX(${({width})=> width/100});
  transform-origin: center left;
  transition: transform 1.5s ease;
  height: 100%;
  background: ${({isSelected}) => isSelected ? 'rgba(126, 198, 81, 0.7)' : 'rgb(198, 198, 198)'};
  z-index: 1;
`
```

