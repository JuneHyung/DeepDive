# 23장 실행 컨텍스트

실행컨텍스트는 자바스크립트의 동작 원리를 담고 있는 핵심 개념이다.

자바스크립트가 스코프를 기반으로 `식별자와 식별자에 바인딩된 값을 관리하는 방식`과 `호이스팅이 발생하는 이유`,  `클로저의 동작 방식`, `태스크 큐와 함께 동작하는 이벤트 핸들러와 비동기 처리의 동작 방식`을 이해할 수 있다.

## 23.1 소스코드의 타입

소스코드는 4가지 타입으로 구분되고, 소스코드는 실행 컨텍스트를 생성한다.

소스코드의 **타입을 나누는 이유는 타입에 따라 실행 컨텍스트를 생성하는 과정과 관리 내용이 다르기 때문!**

* **전역 코드 (global code)**<br/>전역에 존재하는 소스코드.<br/>전역에 정의된 함수, 클래스 드으이 내부코드는 포함 X
* **함수 코드 (function code)**<br/>함수 내부에 존재하는 소스코드<br/>함수 내부의 중첩된 함수, 클래스등의 내부코드는 X
* **eval 코드(eval code)**<br/>빌트인 전역 함수인 eval함수에 인수로 전달되어 실행되는 소스코드
* **모듈 코드(module code)**<br/>모듈 내부에 존재하는 소스코드<br/>모듈 내부의 함수, 클래스 등의 내부코드는 X



## 23.2 소스코드의 평가와 실행

모든 소스코드는 실행전에 평가 과정을 거치며 코드를 실행하기 위한 준비를 한다.

`소스코드의 평가`와 `소스코드의 실행`과정으로 나누어 처리한다.



1. 평가과정에서는 실행 컨텍스트를 생성하고 변수, 함수 드으이 선언문만 먼저 실행하여 생성된 변수나 함수 식별자를 키로 실행 컨텍스트가 관리하는 스코프(**렉시컬 환경의 환경 레코드**)에 등록한다.

2. 평가 과정이 끝나고 소스코드가 순차적으로 실행되기 시작한다. (**런타임 시작**)

3. 이때 소스코드에 필요한 정보(변수나 함수의 참조)를 실행 컨텍스트가 관리하는 스코프에서 검색해 취득함.

4. 변수 값의 변경 등 소스코드의 실행 결과는 다시 실행 컨텍스트가 관리하는 스코프에 등록됨.

![소스코드의 평가와 실행](./readme_images/23-02.소스코드의 평가와 실행.png)

```javascript
var x;
x = 1;
```

변수 선언문 var x;를 먼저 실행

-> x는 실행 컨텍스트가 관리하는 스코프에 등록되고 undefined로 초기화됨.

-> 변수 선언문은 소스코드 평가 과정에서 이미 실행이 완료됨.

-> 실행과정에서는 변수할당문 x=1;만 실행됨.

-> x변수에 값을 할당하려면 x변수가 선언된 변수인지 확인해야함.



이를 위해 실행 컨텍스트가 관리하는 스코프에 x변수가 등록되어 있는지 확인함.

x변수가 실행컨텍스트가 관리하는 스코프에 등록되있따면 x는 평가과정에서 선언문이 실행되어 등록된 변수다.

선언된 변수이기 때문에 값을 할당하고, 할당 결과를 실행 컨텍스트에 등록해 관리한다.
