# 21장 빌트인 객체

## 21.1 자바스크립트 객체의 분류

**표준 빌트인 객체**

ECMAScript 사양에 정의된 객체. 애플리케이션 전역의 공통기능을 제공함.

자바스크립트 실행 환경에 상관없고, 별도 선언없이 언제나 참조하여 사용가능.



**호스트 객체**

ECMAScript 사양에 정의 되있지않지만, 자바스크립트 실행환경에서 추가로 제공하는 객체.

브라우저 - Web API (DOM, BOM, Canvas, ...)

서버 - Node.js고유의 API를 호스트 객체로 제공



**사용자 정의 객체**

사용자가 직접 정의한 객체



## 21.2 표준 빌트인 객체

자바스크립트는 Object, String, Number, Boolean, Symbol, Math, Promise, Reflect, JSON, ... 등등 40여개의 표준 빌트인 객체를 제공함.

Math, Reflect, JSON을 제외한 표준 빌트인 객체는 모두 인스턴스르 ㄹ생성할 수 있는 생성자 함수 객체다.

생성자 함수 객체인 표준 빌트인 객체는 프로토타입 메서드와 정적 메서드를 제공하고, 아닌경우 정적 메서드만 제공한다.

생성자 함수인 표준 빌트인 객체가 생성한 인스턴스의 프로토타입은 **표준 빌트인 객체의 prototype 프로퍼티에 바인딩된 객체**이다.

```javascript
// String 생성자 함수에 의한 String 객체 생성
const strObj = new String('Lee'); // String {"Lee"}
console.log(typeof strObj);       // object

//------------------------------------------------------------------------

// Number 생성자 함수에 의한 Number 객체 생성
const numObj = new Number(123); // Number {123}
console.log(typeof numObj);     // object

//------------------------------------------------------------------------

// Boolean 생성자 함수에 의한 Boolean 객체 생성
const boolObj= new Boolean(true); // Boolean {true}
console.log(typeof boolObj);      // object

//------------------------------------------------------------------------

// Function 생성자 함수에 의한 Function 객체(함수) 생성
const func = new Function('x', 'return x * x'); // ƒ anonymous(x )
console.log(typeof func);                       // function

//------------------------------------------------------------------------

// Array 생성자 함수에 의한 Array 객체(배열) 생성
const arr = new Array(1, 2, 3); // (3) [1, 2, 3]
console.log(typeof arr);        // object

//------------------------------------------------------------------------

// RegExp 생성자 함수에 의한 RegExp 객체(정규 표현식) 생성
const regExp = new RegExp(/ab+c/i); // /ab+c/i
console.log(typeof regExp);         // object

//------------------------------------------------------------------------

// Date 생성자 함수에 의한 Date 객체 생성
const date = new Date();  // Fri May 08 2020 10:43:25 GMT+0900 (대한민국 표준시)
console.log(typeof date); // object
```



## 21.3 원시값과 래퍼 객체

문자열, 숫자, 불리언 등 원시값이 있는데도 String, Number, Boolean이 있는 이유에 대해 알아보자.

```javascript
const str = 'hello';

// 원시 타입인 문자열이 프로퍼티와 메서드를 갖고 있는 객체처럼 동작한다.
console.log(str.length); // 5
console.log(str.toUpperCase()); // HELLO
```

원시값은 객체가 아니므로 프로퍼티나 메서드를 가질 수 없는데도 원시값인 문자열이 마치 객체처럼 동작한다.

원시값의 경우 **자바스크립트 엔진이 일시적으로 원시값을 연관된 객체로 변환해주기 때문.**

즉, 암묵적으로 연관된 객체를 생성하여 생성된 객체로 프로퍼티에 접근하거나 메서드를 호출하고 다시 원시값으로 되돌린다.

**❗ 문자열, 숫자, 불리언 값에 대해 객체처럼 접근하면 생성되는 임시 객체를 래퍼 객체(wrapper object)라 한다.**

위의 경우 마침표 표기법으로 접근하면 그 순간 래퍼 객체인 String 생성자 함수의 인스턴스가 생성되고 문자열은 래퍼 객체의 [[StringData]]내부 슬롯에 할당된다.

래퍼객체의 처리가 종료되면 [[StringData]] 내부 슬롯에 할당된 원시값으로 원래 상태, 즉 식별자가 원시값을 갖도록 되돌리고 래퍼 객체는 가비지 컬렉션의 대상이 된다.<br/>(String뿐만아니라 Number, Boolean, Symbol모두 동일)

```javascript
// ① 식별자 str은 문자열을 값으로 가지고 있다.
const str = 'hello';

// ② 식별자 str은 암묵적으로 생성된 래퍼 객체를 가리킨다.
// 식별자 str의 값 'hello'는 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된다.
// 래퍼 객체에 name 프로퍼티가 동적 추가된다.
str.name = 'Lee';

// ③ 식별자 str은 다시 원래의 문자열, 즉 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된 원시값을 갖는다.
// 이때 ②에서 생성된 래퍼 객체는 아무도 참조하지 않는 상태이므로 가비지 컬렉션의 대상이 된다.

// ④ 식별자 str은 새롭게 암묵적으로 생성된(②에서 생성된 래퍼 객체와는 다른) 래퍼 객체를 가리킨다.
// 새롭게 생성된 래퍼 객체에는 name 프로퍼티가 존재하지 않는다.
console.log(str.name); // undefined

// ⑤ 식별자 str은 다시 원래의 문자열, 즉 래퍼 객체의 [[StringData]] 내부 슬롯에 할당된 원시값을 갖는다.
// 이때 ④에서 생성된 래퍼 객체는 아무도 참조하지 않는 상태이므로 가비지 컬렉션의 대상이 된다.
console.log(typeof str, str);
```

❗ null이나 undefined는 래퍼객체를 생성하지 않기 때문에 객체처럼 사용하면 에러가 발생.



## 21.4 전역 객체

전역 객체(Global Object)는 **코드가 실행되기 이전 단계에 자바스크립트 엔진에 의해 어떤 객체보다도 먼저 생성되는 특수한 객체.**

**어떤 객체에도 속하지 않은 최상위 객체**다.

자바스크립트 환경에 따라 다르다.

브라우저 - window(또는 self, this, frames) / Node.js에서는 global.

> globalThis
>
> ES11에서 도입된 globalThis는 브라우저 환경, Node.js환경에서 전역 객체를 가리키던 다양한 식별자를 **통일한 식별자**
>
> ```javascript
> // 브라우저 환경
> globalThis === this   // true
> globalThis === window // true
> globalThis === self   // true
> globalThis === frames // true
> 
> // Node.js 환경(12.0.0 이상)
> globalThis === this   // true
> globalThis === global // true
> ```